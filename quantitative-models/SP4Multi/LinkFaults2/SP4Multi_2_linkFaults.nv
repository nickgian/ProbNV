(* Bounded link faults *)

include "../SP4Multi_control.nv"

let failureProb (f : [S]tedge) =
  0.0050251256281407

symbolic (hasFailures, f1, f2) : (bool, tedge, tedge) =
  if (hasFailures = false) then
    0.0001771402363327
  else
    if (f1 <e f2) then
      (failureProb f1) *. (failureProb f2) *. 0.7255664080186092
    else
    if (f1 = f2) then
      (failureProb f1) *. 0.7255664080186092
    else 0.0

let mergeLinkFaults u (x : [M]attribute) (y : [M]attribute) =
  merge u x y

let transLinkFaults d e (x : [M]attribute) =
  if hasFailures && ((f1 = e)|| (f2 = e)) then
    {connected=None; static=None; ospf=None; bgp=None; selected=None;}
  else trans d e x

let initLinkFaults d u = init d u 

solution rib_70_0_6_0_24 = (initLinkFaults (70.0.6.0/24), transLinkFaults (70.0.6.0/24), mergeLinkFaults)

solution rib_70_0_7_0_24 = (initLinkFaults (70.0.7.0/24), transLinkFaults (70.0.7.0/24), mergeLinkFaults)

solution rib_70_0_10_0_24 = (initLinkFaults (70.0.10.0/24), transLinkFaults (70.0.10.0/24), mergeLinkFaults)

solution rib_70_0_11_0_24 = (initLinkFaults (70.0.11.0/24), transLinkFaults (70.0.11.0/24), mergeLinkFaults)

solution rib_70_0_14_0_24 = (initLinkFaults (70.0.14.0/24), transLinkFaults (70.0.14.0/24), mergeLinkFaults)

solution rib_70_0_15_0_24 = (initLinkFaults (70.0.15.0/24), transLinkFaults (70.0.15.0/24), mergeLinkFaults)

solution rib_70_0_18_0_24 = (initLinkFaults (70.0.18.0/24), transLinkFaults (70.0.18.0/24), mergeLinkFaults)

solution rib_70_0_19_0_24 = (initLinkFaults (70.0.19.0/24), transLinkFaults (70.0.19.0/24), mergeLinkFaults)

